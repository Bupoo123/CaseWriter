# CaseWriter 开发笔记

## 项目概述

**项目名称**: CaseWriter（Case Report 撰写助手）  
**版本**: V1.2  
**开发日期**: 2025-11-12  
**开发单位**: 杰毅生物研发中心  
**项目类型**: 纯前端网页应用

## 项目背景

在病原检测领域，罕见感染病例具有重要的科研与发表价值。团队成员在撰写病例报告（Case Report）时，常面临以下问题：
- 结构不规范
- 语言表达不学术
- 缺少模板与期刊指南
- 难以判断病例是否值得发表

CaseWriter 旨在基于 CARE 2013 标准，为团队提供一个纯前端的病例报告智能撰写与指导平台。

## 技术架构

### 技术栈
- **前端框架**: Vue.js 3（CDN 版本）
- **样式**: 原生 CSS3
- **数据存储**: 浏览器 LocalStorage
- **导出功能**: FileSaver.js（Word/Markdown 导出）
- **部署方式**: 静态页面（GitHub Pages 或内部知识平台）

### 项目结构
```
CaseWriter/
├── index.html          # 主页面
├── css/
│   └── style.css      # 样式文件
├── js/
│   └── app.js         # 应用逻辑（Vue.js）
├── 资料/               # 参考资料（CARE 指南等）
├── README.md          # 使用说明文档
└── 开发笔记.md        # 本文件
```

## 功能模块

### 1. 价值评估模块（优先级最高）

**功能描述**: 帮助用户评估病例报告的发表价值，判断该案例是否值得发表。

**主要功能**:
- **发表的典型特征指导**（5个维度）:
  1. 病原体罕见或首次报道
  2. 诊断具有挑战性
  3. 感染部位特殊或危险
  4. 结果对治疗有直接影响
  5. 结合多组学或联合检测方法

- **评估维度表格**: 8个评估维度，每个维度标注发表价值星级（⭐）

- **投稿期刊分布特点**: 分析主流期刊分布和投稿难度

**技术实现**:
- 使用 Vue.js 响应式数据绑定
- 数据存储在 `publicationFeatures` 和 `evaluationDimensions` 数组中
- 响应式设计，支持移动端访问

### 2. 撰写流程模块（核心功能）

**功能描述**: 基于 CARE 2013 标准的13个结构化章节撰写。

**章节列表**:
1. 标题（含标题特征指导）
2. 关键词
3. 摘要
4. 引言
5. 患者信息
6. 临床发现
7. 时间线
8. 诊断评估
9. 治疗干预
10. 随访和结果
11. 讨论
12. 患者观点（可选）
13. 知情同意

**特色功能**:
- **标题章节增强**: 整合了标题特征分析
  - 标题结构模式：`[病例类型 / 病原名 / 部位] + 动词短语（diagnosed / identified / assisted by） + mNGS`
  - 常见句型示例（3种模式）
  - 高频关键词提示

- **章节导航**: 左侧导航栏快速切换章节
- **写作提示**: 每个章节提供写作要点和常见错误提示
- **实时保存**: 编辑内容自动保存到 LocalStorage

**技术实现**:
- 章节数据存储在 `careSections` 数组中
- 每个章节包含：title, description, content, placeholder, tips
- 使用 `v-model` 双向绑定实现实时编辑
- `@input` 事件触发自动保存

### 3. 写作指导模块

**功能描述**: 提供写作知识库和指导内容。

**内容包含**:
- CARE 指南核心原则
- 常见写作错误（10条）
- 写作技巧（8条）
- 摘要写作示例

**技术实现**:
- 数据存储在 `writingGuides` 数组中
- 支持多种内容类型：text, tips, example
- 使用条件渲染展示不同格式内容

### 4. 期刊选择模块

**功能描述**: 提供主流 Case Report 期刊信息和投稿指南。

**功能特性**:
- **期刊数据库**: 20+ 主流期刊信息
  - 主题方向
  - 出版社
  - 是否OA
  - APC（文章处理费）
  - 投稿网址
  - 模板链接

- **筛选功能**:
  - 关键词搜索
  - 按主题筛选
  - 按OA类型筛选

- **快速跳转**: 一键跳转到期刊投稿页面

**技术实现**:
- 期刊数据存储在 `journals` 数组中
- 使用计算属性 `filteredJournals` 实现筛选
- 支持多条件组合筛选

## 数据存储

### LocalStorage 结构
```javascript
{
  careSections: [
    {
      title: "章节标题",
      content: "用户输入的内容",
      // ... 其他属性
    }
  ],
  lastSaved: "2025-11-12T10:30:00.000Z"
}
```

### 自动保存机制
- 编辑内容时自动保存（`@input` 事件）
- 页面加载时自动恢复数据（`mounted` 生命周期）
- 支持手动保存和加载

## 导出功能

### Word 导出
- **格式**: HTML 格式的 .doc 文件
- **特点**: 可在 Microsoft Word 中正常打开
- **内容**: 包含所有已填写的章节
- **样式**: 自动应用格式和样式

### Markdown 导出
- **格式**: 标准 Markdown (.md)
- **特点**: 兼容性强，可在各种 Markdown 编辑器中打开
- **内容**: 包含所有已填写的章节
- **格式**: 使用标准 Markdown 语法

## 开发历程

### 第一阶段：项目初始化（2025-11-12）
- ✅ 创建项目目录结构
- ✅ 搭建 Vue.js 基础框架
- ✅ 实现撰写流程导航（13个章节）
- ✅ 实现写作指导模块
- ✅ 实现期刊选择模块
- ✅ 实现 LocalStorage 数据存储
- ✅ 实现导出功能（Word/Markdown）
- ✅ 添加样式和UI优化
- ✅ 推送到 GitHub 仓库

### 第二阶段：价值评估模块开发（2025-11-12）
- ✅ 添加价值评估导航按钮
- ✅ 实现快速评估工具（8个评估标准，实时计分）
- ✅ 添加标题特征分析
- ✅ 添加发表的典型特征指导（5个维度）
- ✅ 添加评估维度表格（8个维度）
- ✅ 添加投稿期刊分布特点说明
- ✅ 实现评估结果自动保存
- ✅ 推送到 GitHub 仓库

### 第三阶段：功能优化（2025-11-12）
- ✅ 调整导航顺序：价值评估移到最前面
- ✅ 移除快速评估工具（简化界面）
- ✅ 将标题特征整合到撰写流程的标题章节
- ✅ 清理不再使用的代码
- ✅ 优化章节编号
- ✅ 推送到 GitHub 仓库

## 关键设计决策

### 1. 纯前端架构
**决策**: 使用纯前端技术，不依赖后端服务器  
**原因**:
- 降低部署复杂度
- 保护数据隐私（数据仅存储在本地）
- 提高访问速度
- 支持离线使用

### 2. Vue.js CDN 版本
**决策**: 使用 CDN 版本的 Vue.js，而非构建版本  
**原因**:
- 无需构建工具，开发简单
- 快速部署
- 适合静态页面托管

### 3. LocalStorage 存储
**决策**: 使用浏览器 LocalStorage 而非 IndexedDB  
**原因**:
- 数据结构简单
- API 使用简单
- 满足当前需求

### 4. HTML 格式 Word 导出
**决策**: 导出为 HTML 格式的 .doc 文件，而非真正的 .docx  
**原因**:
- 无需引入复杂的文档生成库
- 可在 Word 中正常打开
- 实现简单，兼容性好

### 5. 价值评估模块优先级
**决策**: 将价值评估模块放在导航栏最前面  
**原因**:
- 帮助用户首先判断病例是否值得发表
- 避免无效工作
- 提高用户体验

## 代码统计

### 文件大小
- `index.html`: ~270 行
- `css/style.css`: ~820 行
- `js/app.js`: ~635 行
- **总计**: ~1725 行代码

### 功能模块代码分布
- 价值评估模块: ~150 行
- 撰写流程模块: ~200 行
- 写作指导模块: ~50 行
- 期刊选择模块: ~100 行
- 数据存储和导出: ~135 行

## 用户体验优化

### 1. 响应式设计
- 支持桌面端和移动端
- 使用媒体查询适配不同屏幕尺寸
- 移动端优化布局和字体大小

### 2. 交互反馈
- 按钮悬停效果
- 章节选中状态高亮
- 自动保存提示
- 加载和导出成功提示

### 3. 视觉设计
- 现代化渐变配色（紫色主题）
- 清晰的层次结构
- 统一的视觉风格
- 良好的可读性

## 未来优化方向

### 功能增强
1. **模板库**: 提供更多病例报告模板
2. **协作功能**: 支持多人协作编辑（需要后端支持）
3. **版本管理**: 支持文档版本历史
4. **云同步**: 支持多设备数据同步（需要后端支持）
5. **AI 辅助**: 集成 AI 写作建议

### 技术优化
1. **性能优化**: 代码分割，按需加载
2. **PWA 支持**: 支持离线使用和安装
3. **国际化**: 支持多语言
4. **无障碍**: 提升可访问性

### 用户体验
1. **快捷键**: 支持键盘快捷键操作
2. **拖拽排序**: 章节内容拖拽排序
3. **主题切换**: 支持深色模式
4. **个性化设置**: 用户自定义配置

## 部署说明

### GitHub Pages 部署
1. 将代码推送到 GitHub 仓库
2. 在仓库设置中启用 GitHub Pages
3. 选择 main 分支作为源
4. 访问 `https://[username].github.io/CaseWriter`

### 本地部署
1. 克隆或下载项目
2. 直接在浏览器中打开 `index.html`
3. 或使用本地服务器（如 Python `http.server`）

### 内部服务器部署
1. 将项目文件上传到 Web 服务器
2. 配置 Web 服务器支持静态文件
3. 访问服务器地址即可使用

## 已知问题

1. **Word 导出格式**: 导出的是 HTML 格式的 .doc 文件，某些复杂格式可能不完全兼容
2. **浏览器兼容性**: 部分旧版浏览器可能不支持某些 CSS3 特性
3. **数据容量限制**: LocalStorage 有 5-10MB 的存储限制

## 维护说明

### 更新期刊信息
编辑 `js/app.js` 中的 `journals` 数组，添加或更新期刊信息。

### 更新写作指导
编辑 `js/app.js` 中的 `writingGuides` 数组，添加或更新指导内容。

### 更新评估维度
编辑 `js/app.js` 中的 `evaluationDimensions` 和 `publicationFeatures` 数组。

### 样式调整
编辑 `css/style.css` 文件，调整颜色、字体、布局等。

## 开发团队

- **开发**: AI Assistant
- **需求**: 杰毅生物研发中心
- **版本管理**: GitHub

## 参考资料

- CARE 2013 Guidelines
- Vue.js 3 官方文档
- 项目需求说明书（SRS V1.2）

---

**最后更新**: 2025-11-12  
**文档版本**: 1.0

